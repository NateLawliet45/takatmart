window.theme=window.theme||{},theme.Dropdown=function(e){e=e||document;const t={dropdownOpen:"dropdown--open",dropdownOutside:"dropdown--outside"},d={dropdown:".dropdown",dropdownToggle:":scope > .dropdown__toggle",dropdownMenu:":scope > .dropdown__menu"},o=e.querySelectorAll(d.dropdown);function r(e){var o=e.querySelectorAll(d.dropdownToggle),n=e.querySelectorAll(d.dropdownMenu);e.classList.add(t.dropdownOpen),o.forEach(e=>{e.setAttribute("aria-expanded",!0)}),n.forEach(e=>{var o=e.getBoundingClientRect().top,o=window.innerHeight-(o+25);e.classList.add(t.dropdownOpen),e.style.maxHeight=o+"px",i(e)})}function s(o){var e=o.querySelectorAll(d.dropdownToggle),n=o.querySelectorAll(d.dropdownMenu);e.forEach(e=>{e.setAttribute("aria-expanded",!1)}),n.forEach(e=>{theme.helpers.closeTransition({elementToTransition:e,animationSpeed:window.themeVariables.animation.speed},function(){o.classList.remove(t.dropdownOpen),e.classList.remove(t.dropdownOpen)})})}function a(){o.forEach(e=>{e.classList.contains(t.dropdownOpen)&&s(e)})}function i(e){document.body.clientWidth<e.getBoundingClientRect().left+e.offsetWidth&&e.classList.add(t.dropdownOutside)}o.length&&(o.forEach(n=>{n.querySelectorAll(d.dropdownMenu).forEach(e=>{i(e)}),n.addEventListener("mouseenter",()=>{var e=t.dropdownOpen;n.classList.contains(e)||r(n)},{passive:!0}),n.addEventListener("touchstart",e=>{var o=t.dropdownOpen,e=e.target.closest(".dropdown__menu");(!n.classList.contains(o)||e?r:s)(n)},{passive:!0}),document.addEventListener("touchstart",e=>{e.target.closest(d.dropdown)||a()},{passive:!0}),n.addEventListener("mouseleave",e=>{null!==e.relatedTarget&&(e=t.dropdownOpen,n.classList.contains(e))&&s(n)},{passive:!0})}),window.addEventListener("resize",()=>{o.forEach(e=>{e.querySelectorAll(d.dropdownMenu).forEach(e=>{i(e)})})}),document.addEventListener("keyup",e=>{if(9===e.which){const n=function(o,n){if(o&&n){var t=[];let e=o.closest(n);for(;null!==e;)t.push(e),e=e.parentElement.closest(n);return t}}(document.activeElement,d.dropdown);n.length?(o.forEach(o=>{!n.some(e=>o===e)&&o.classList.contains(t.dropdownOpen)&&s(o)}),n.forEach(e=>{e.classList.contains(t.dropdownOpen)||r(e)})):a()}}))};